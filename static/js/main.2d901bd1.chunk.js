(this["webpackJsonpspinner-wall"]=this["webpackJsonpspinner-wall"]||[]).push([[0],{84:function(t,e,n){t.exports=n(92)},89:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(33),o=n.n(i),l=(n(89),n(8)),c=n(22),u=n(4),s=function(t){var e=r.useRef(null),n=(r.useRef([]),window.innerHeight-10),a=window.innerWidth,i=10,o=10,l=(n-2*i+5)/t.height,c=(a-2*o+5)/t.width;l>c?i+=(l-c)*t.height/2:c>l&&(o+=(c-l)*t.width/2);var s=u.d().domain([0,t.height]).range([i-2.5,n-i+2.5]),f=s(1)-s(0)-5,d=u.d().domain([0,t.width]).range([o-2.5,a-o+2.5]),h=d(1)-d(0)-5,m=Math.min(f,h);return r.useEffect((function(){if(e.current){var n=u.e(e.current).selectAll("g.root").data([0]).join((function(t){return t.append("g").attr("class","root")})).selectAll("g.cell").data(t.data).join((function(t){return t.append("g").attr("class","cell")})).attr("transform",(function(e,n){var r=n%t.width,a=Math.floor(n/t.width),i=d(r+.5),o=s(a+.5);return"translate(".concat(i,",").concat(o,")")}));if(t.withColor){var r=u.a().innerRadius(0).outerRadius(m/2).startAngle(0);n.selectAll("path.color").data((function(e){return[e/t.maxRotationValue*Math.PI*2]})).join((function(t){return t.append("path").attr("class","color")})).attr("style","fill: red;").transition().duration(100).attrTween("d",(function(t){var e=u.b(this._current,t);return this._current=t,function(t){return r({endAngle:e(t)})}}))}else n.selectAll("path.color").remove();var a=n.selectAll("rect.spinner").data((function(t){return[t]})).join((function(t){return t.append("rect").attr("class","spinner")})).attr("x",-m/2).attr("width",m).attr("y",.2*-m/2).attr("height",.2*m).attr("style","fill: white").transition().duration(150);if(t.withColor){a.attrTween("transform",(function(e){return u.c(u.e(this).attr("transform"),"rotate(".concat(e/t.maxRotationValue*360+90,")"))}))}else a.attr("transform",(function(e){return"rotate(".concat(e/t.maxRotationValue*360+90,")")}))}})),r.createElement("svg",{className:"d3-wall-display",ref:e,height:n,width:a})},f=n(3),d=function(t){var e=r.useState(48),n=Object(l.a)(e,2),a=n[0],i=n[1],o=r.useState(48),u=Object(l.a)(o,2),d=u[0],h=u[1],m=r.useRef([]),p=r.useRef(null),w=r.useState({x:0,y:0,values:[]}),g=Object(l.a)(w,2),v=g[0],x=g[1],E=r.useState(),b=Object(l.a)(E,2),y=b[0],A=b[1],k=r.useState(!1),R=Object(l.a)(k,2),j=R[0],S=R[1],C=r.useCallback((function(){S(!j)}),[j,S]);if(r.useEffect((function(){var t=new f.b,e=new f.a(1280,720);e.start().catch((function(t){console.log(t),A(t.toString())}));var n=new f.c("uint8",[720,1280,4]),r=n;r=f.e(r);var a=Math.floor(Math.max(720,1280)/d);r=f.f(r,a,"max");var i=f.g(r);t.init(r);var o=window.requestAnimationFrame((function a(){e.getImageBuffer(n),t.runOp(r,{},i);var l=i.shape[0],u=i.shape[1];x({x:u,y:l,values:c.range(0,l).flatMap((function(t){return c.range(0,u).map((function(e){return i.get(t,e,1)}))}))}),p.current&&f.d(p.current,n);var s=new Date;m.current.push(s),m.current=m.current.filter((function(t){return s.getTime()<t.getTime()+1e3})),o=window.requestAnimationFrame(a)}));return function(){window.cancelAnimationFrame(o)}}),[x,d]),y)return r.createElement("div",null,"Error: ",y);var I=v.x,M=v.y,O=v.values;return I<=0||M<=0?r.createElement("div",null,"Enabling camera..."):r.createElement("div",null,r.createElement("div",{style:{position:"fixed",color:"white",display:"flex",flexDirection:"column",width:"100px"}},r.createElement("button",{onClick:C},j?"Hide":"Show"," image"),r.createElement("span",null,"FPS: ",m.current.length),r.createElement("label",{htmlFor:"spinners"},"Approx spinners:"),r.createElement("input",{type:"number",max:50,min:1,id:"spinners",onChange:function(t){return i(parseInt(t.target.value))},value:a}),r.createElement("button",{onClick:function(){return h(a)}},"Update spinners")),r.createElement("div",{style:{background:"black",zIndex:-2,position:"fixed",top:0,left:0,right:0,bottom:0}}),r.createElement("canvas",{height:720,width:1280,style:{display:j?"block":"none",zIndex:-1,opacity:.5,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:p}),r.createElement(s,{height:M,width:I,maxRotationValue:90,data:O}))},h=function(){return a.a.createElement(d,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[84,1,2]]]);
//# sourceMappingURL=main.2d901bd1.chunk.js.map