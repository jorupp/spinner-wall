(this["webpackJsonpspinner-wall"]=this["webpackJsonpspinner-wall"]||[]).push([[0],{84:function(t,e,n){t.exports=n(92)},89:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(33),o=n.n(i),l=(n(89),n(13)),c=n(22),u=n(4),s=function(t){var e=r.useRef(null),n=(r.useRef([]),window.innerHeight-10),a=window.innerWidth,i=10,o=10,l=(n-2*i+5)/t.height,c=(a-2*o+5)/t.width;l>c?i+=(l-c)*t.height/2:c>l&&(o+=(c-l)*t.width/2);var s=u.d().domain([0,t.height]).range([i-2.5,n-i+2.5]),f=s(1)-s(0)-5,d=u.d().domain([0,t.width]).range([o-2.5,a-o+2.5]),h=d(1)-d(0)-5,m=Math.min(f,h);return r.useEffect((function(){if(e.current){var n=u.e(e.current).selectAll("g.root").data([0]).join((function(t){return t.append("g").attr("class","root")})).selectAll("g.cell").data(t.data).join((function(t){return t.append("g").attr("class","cell")})).attr("transform",(function(e,n){var r=n%t.width,a=Math.floor(n/t.width),i=d(r+.5),o=s(a+.5);return"translate(".concat(i,",").concat(o,")")}));if(t.withColor){var r=u.a().innerRadius(0).outerRadius(m/2).startAngle(0);n.selectAll("path.color").data((function(e){return[e/t.maxRotationValue*Math.PI*2]})).join((function(t){return t.append("path").attr("class","color")})).attr("style","fill: red;").transition().duration(100).attrTween("d",(function(t){var e=u.b(this._current,t);return this._current=t,function(t){return r({endAngle:e(t)})}}))}else n.selectAll("path.color").remove();var a=n.selectAll("rect.spinner").data((function(t){return[t]})).join((function(t){return t.append("rect").attr("class","spinner")})).attr("x",-m/2).attr("width",m).attr("y",.2*-m/2).attr("height",.2*m).attr("style","fill: black").transition().duration(150);if(t.withColor){a.attrTween("transform",(function(e){return u.c(u.e(this).attr("transform"),"rotate(".concat(e/t.maxRotationValue*360+90,")"))}))}else a.attr("transform",(function(e){return"rotate(".concat(e/t.maxRotationValue*360+90,")")}))}})),r.createElement("svg",{className:"d3-wall-display",ref:e,height:n,width:a})},f=n(3),d=function(t){var e=r.useRef([]),n=r.useRef(null),a=r.useState({x:0,y:0,values:[]}),i=Object(l.a)(a,2),o=i[0],u=i[1],d=r.useState(),h=Object(l.a)(d,2),m=h[0],w=h[1],g=r.useState(!1),p=Object(l.a)(g,2),v=p[0],E=p[1],x=r.useCallback((function(){E(!v)}),[v,E]);if(r.useEffect((function(){var t=new f.b,r=new f.a(1280,720);r.start().catch((function(t){console.log(t),w(t.toString())}));var a=new f.c("uint8",[720,1280,4]),i=a;i=f.e(i),i=f.f(i,Math.floor(Math.max(720,1280)/48),"max");var o=f.g(i);t.init(i);var l=window.requestAnimationFrame((function s(){r.getImageBuffer(a),t.runOp(i,{},o);var d=o.shape[0],h=o.shape[1];u({x:h,y:d,values:c.range(0,d).flatMap((function(t){return c.range(0,h).map((function(e){return o.get(t,e,1)}))}))}),n.current&&f.d(n.current,a);var m=new Date;e.current.push(m),e.current=e.current.filter((function(t){return m.getTime()<t.getTime()+1e3})),l=window.requestAnimationFrame(s)}));return function(){window.cancelAnimationFrame(l)}}),[u]),m)return r.createElement("div",null,"Error: ",m);var b=o.x,y=o.y,A=o.values;return b<=0||y<=0?r.createElement("div",null,"Enabling camera..."):r.createElement("div",null,r.createElement("div",{style:{position:"fixed"}},r.createElement("button",{onClick:x},v?"Hide":"Show"," image"),r.createElement("br",null),r.createElement("span",null,"FPS: ",e.current.length)),r.createElement("canvas",{height:720,width:1280,style:{display:v?"block":"none",zIndex:-1,opacity:.3,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:n}),r.createElement(s,{height:y,width:b,maxRotationValue:90,data:A}))},h=function(){return a.a.createElement(d,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[84,1,2]]]);
//# sourceMappingURL=main.7dbcc4cf.chunk.js.map