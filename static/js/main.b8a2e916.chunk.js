(this["webpackJsonpspinner-wall"]=this["webpackJsonpspinner-wall"]||[]).push([[0],{84:function(t,e,n){t.exports=n(92)},89:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(33),o=n.n(i),l=(n(89),n(5)),c=n(22),u=n(4),s=function(t){var e=t.invert,n=r.useRef(null),a=(r.useRef([]),window.innerHeight-10),i=window.innerWidth,o=10,l=10,c=(a-2*o+5)/t.height,s=(i-2*l+5)/t.width;c>s?o+=(c-s)*t.height/2:s>c&&(l+=(s-c)*t.width/2);var f=u.d().domain([0,t.height]).range([o-2.5,a-o+2.5]),d=f(1)-f(0)-5,h=u.d().domain([0,t.width]).range([l-2.5,i-l+2.5]),m=h(1)-h(0)-5,p=Math.min(d,m);return r.useEffect((function(){if(n.current){var r=u.e(n.current).selectAll("g.root").data([0]).join((function(t){return t.append("g").attr("class","root")})).selectAll("g.cell").data(t.data).join((function(t){return t.append("g").attr("class","cell")})).attr("transform",(function(e,n){var r=n%t.width,a=Math.floor(n/t.width),i=h(r+.5),o=f(a+.5);return"translate(".concat(i,",").concat(o,")")}));if(t.withColor){var a=u.a().innerRadius(0).outerRadius(p/2).startAngle(0);r.selectAll("path.color").data((function(e){return[e/t.maxRotationValue*Math.PI*2]})).join((function(t){return t.append("path").attr("class","color")})).attr("style","fill: red;").transition().duration(100).attrTween("d",(function(t){var e=u.b(this._current,t);return this._current=t,function(t){return a({endAngle:e(t)})}}))}else r.selectAll("path.color").remove();var i=r.selectAll("rect.spinner").data((function(t){return[t]})).join((function(t){return t.append("rect").attr("class","spinner")})).attr("x",-p/2).attr("width",p).attr("y",.2*-p/2).attr("height",.2*p).attr("style",e?"fill: black":"fill: white").transition().duration(150);if(t.withColor){i.attrTween("transform",(function(e){return u.c(u.e(this).attr("transform"),"rotate(".concat(e/t.maxRotationValue*360+90,")"))}))}else i.attr("transform",(function(e){return"rotate(".concat(e/t.maxRotationValue*360+90,")")}))}})),r.createElement("svg",{className:"d3-wall-display",ref:n,height:a,width:i})},f=n(3),d=function(t){var e=r.useState(!1),n=Object(l.a)(e,2),a=n[0],i=n[1],o=r.useState(48),u=Object(l.a)(o,2),d=u[0],h=u[1],m=r.useState(48),p=Object(l.a)(m,2),w=p[0],g=p[1],v=r.useRef([]),b=r.useRef(null),x=r.useState({x:0,y:0,values:[]}),E=Object(l.a)(x,2),y=E[0],k=E[1],A=r.useState(),j=Object(l.a)(A,2),R=j[0],S=j[1],C=r.useState(!1),I=Object(l.a)(C,2),O=I[0],F=I[1],M=r.useCallback((function(){F(!O)}),[O,F]);if(r.useEffect((function(){var t=new f.b,e=new f.a(1280,720);e.start().catch((function(t){console.log(t),S(t.toString())}));var n=new f.c("uint8",[720,1280,4]),r=n;r=f.e(r);var a=Math.floor(Math.max(720,1280)/w);r=f.f(r,a,"max");var i=f.g(r);t.init(r);var o=window.requestAnimationFrame((function a(){e.getImageBuffer(n),t.runOp(r,{},i);var l=i.shape[0],u=i.shape[1];k({x:u,y:l,values:c.range(0,l).flatMap((function(t){return c.range(0,u).map((function(e){return i.get(t,e,1)}))}))}),b.current&&f.d(b.current,n);var s=new Date;v.current.push(s),v.current=v.current.filter((function(t){return s.getTime()<t.getTime()+1e3})),o=window.requestAnimationFrame(a)}));return function(){window.cancelAnimationFrame(o)}}),[k,w]),R)return r.createElement("div",null,"Error: ",R);var T=y.x,V=y.y,B=y.values;return T<=0||V<=0?r.createElement("div",null,"Enabling camera..."):r.createElement("div",null,r.createElement("div",{style:{position:"fixed",color:a?"black":"white",display:"flex",flexDirection:"column",width:"100px"}},r.createElement("button",{onClick:M},O?"Hide":"Show"," image"),r.createElement("span",null,"FPS: ",v.current.length),r.createElement("label",{htmlFor:"spinners"},"Approx spinners:"),r.createElement("input",{type:"number",max:50,min:1,id:"spinners",onChange:function(t){return h(parseInt(t.target.value))},value:d}),r.createElement("button",{onClick:function(){return g(d)}},"Update spinners"),r.createElement("span",{style:{display:"flex"}},r.createElement("label",{htmlFor:"invert"},"Invert:"),r.createElement("input",{type:"checkbox",checked:a,onChange:function(t){return i(t.target.checked)}}))),r.createElement("div",{style:{background:a?"white":"black",zIndex:-2,position:"fixed",top:0,left:0,right:0,bottom:0}}),r.createElement("canvas",{height:720,width:1280,style:{display:O?"block":"none",zIndex:-1,opacity:.5,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:b}),r.createElement(s,{height:V,width:T,maxRotationValue:90,data:B,invert:a}))},h=function(){return a.a.createElement(d,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[84,1,2]]]);
//# sourceMappingURL=main.b8a2e916.chunk.js.map